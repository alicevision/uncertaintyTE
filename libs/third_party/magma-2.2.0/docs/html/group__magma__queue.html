<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MAGMA: Queue  management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="magma-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MAGMA
   &#160;<span id="projectnumber">2.2.0</span>
   </div>
   <div id="projectbrief">Matrix Algebra for GPU and Multicore Architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Routines</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__magma__queue.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Queue management<div class="ingroups"><a class="el" href="group__group__util.html">Utilities</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmagma__queue.html">magma_queue</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define <a class="el" href="structmagma__queue.html" title="Define magma_queue structure, which wraps around CUDA and OpenCL queues. ">magma_queue</a> structure, which wraps around CUDA and OpenCL queues.  <a href="structmagma__queue.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4ed57f0863b784a29d71939b3758bdef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#ga4ed57f0863b784a29d71939b3758bdef">magma_queue_create</a>(                 device,  queue_ptr)</td></tr>
<tr class="memdesc:ga4ed57f0863b784a29d71939b3758bdef"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__magma__queue.html#ga4ed57f0863b784a29d71939b3758bdef" title="magma_queue_create( device, queue_ptr ) is the preferred alias to this function. ">magma_queue_create( device, queue_ptr )</a> is the preferred alias to this function.  <a href="#ga4ed57f0863b784a29d71939b3758bdef">More...</a><br /></td></tr>
<tr class="separator:ga4ed57f0863b784a29d71939b3758bdef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85b3bc302f2975f6e668cf57a196c97a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#ga85b3bc302f2975f6e668cf57a196c97a">magma_queue_create_from_cuda</a>(                 device,  cuda_stream,  cublas_handle,  cusparse_handle,  queue_ptr)</td></tr>
<tr class="memdesc:ga85b3bc302f2975f6e668cf57a196c97a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Warning: non-portable outside of CUDA.  <a href="#ga85b3bc302f2975f6e668cf57a196c97a">More...</a><br /></td></tr>
<tr class="separator:ga85b3bc302f2975f6e668cf57a196c97a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd3182186abc4a99def8a61a48af43fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#gacd3182186abc4a99def8a61a48af43fc">magma_queue_destroy</a>(queue)</td></tr>
<tr class="memdesc:gacd3182186abc4a99def8a61a48af43fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a queue, freeing its resources.  <a href="#gacd3182186abc4a99def8a61a48af43fc">More...</a><br /></td></tr>
<tr class="separator:gacd3182186abc4a99def8a61a48af43fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3faec119d7aaac0d726d22b540d67fde"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#ga3faec119d7aaac0d726d22b540d67fde">magma_queue_sync</a>(queue)</td></tr>
<tr class="memdesc:ga3faec119d7aaac0d726d22b540d67fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronizes with a queue.  <a href="#ga3faec119d7aaac0d726d22b540d67fde">More...</a><br /></td></tr>
<tr class="separator:ga3faec119d7aaac0d726d22b540d67fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7a24bc34ee11fdd109e8c21b551400eb"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#ga7a24bc34ee11fdd109e8c21b551400eb">magma_mem_size</a> (<a class="el" href="structmagma__queue.html">magma_queue_t</a> queue)</td></tr>
<tr class="separator:ga7a24bc34ee11fdd109e8c21b551400eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49e39408583e02dfef86bac8ddb6d5d5"><td class="memItemLeft" align="right" valign="top">magma_int_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#ga49e39408583e02dfef86bac8ddb6d5d5">magma_queue_get_device</a> (<a class="el" href="structmagma__queue.html">magma_queue_t</a> queue)</td></tr>
<tr class="separator:ga49e39408583e02dfef86bac8ddb6d5d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52943f155bf74be714a3c7ad8565772d"><td class="memItemLeft" align="right" valign="top">cudaStream_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#ga52943f155bf74be714a3c7ad8565772d">magma_queue_get_cuda_stream</a> (<a class="el" href="structmagma__queue.html">magma_queue_t</a> queue)</td></tr>
<tr class="separator:ga52943f155bf74be714a3c7ad8565772d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae170c3d343ba4ab6ce1ed463a2f5f4bd"><td class="memItemLeft" align="right" valign="top">cublasHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#gae170c3d343ba4ab6ce1ed463a2f5f4bd">magma_queue_get_cublas_handle</a> (<a class="el" href="structmagma__queue.html">magma_queue_t</a> queue)</td></tr>
<tr class="separator:gae170c3d343ba4ab6ce1ed463a2f5f4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1a1a2938a02c5b56678d52874500e9a"><td class="memItemLeft" align="right" valign="top">cusparseHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__magma__queue.html#gae1a1a2938a02c5b56678d52874500e9a">magma_queue_get_cusparse_handle</a> (<a class="el" href="structmagma__queue.html">magma_queue_t</a> queue)</td></tr>
<tr class="separator:gae1a1a2938a02c5b56678d52874500e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga4ed57f0863b784a29d71939b3758bdef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">magma_queue_create</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">device, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">queue_ptr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="group__magma__queue.html#ga4ed57f0863b784a29d71939b3758bdef" title="magma_queue_create( device, queue_ptr ) is the preferred alias to this function. ">magma_queue_create( device, queue_ptr )</a> is the preferred alias to this function. </p>
<p>Creates a new MAGMA queue, with associated CUDA stream, cuBLAS handle, and cuSparse handle.</p>
<p>This is the MAGMA v2 version which takes a device ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>Device to create queue on.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">queue_ptr</td><td>On output, the newly created queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga85b3bc302f2975f6e668cf57a196c97a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">magma_queue_create_from_cuda</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">device, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cuda_stream, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cublas_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cusparse_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">queue_ptr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Warning: non-portable outside of CUDA. </p>
<p>Use with discretion.</p>
<p>Creates a new MAGMA queue, using the given CUDA stream, cuBLAS handle, and cuSparse handle. The caller retains ownership of the given stream and handles, so must free them after destroying the queue; see <a class="el" href="group__magma__queue.html#gacd3182186abc4a99def8a61a48af43fc" title="Destroys a queue, freeing its resources. ">magma_queue_destroy()</a>.</p>
<p>MAGMA sets the stream on the cuBLAS and cuSparse handles, and assumes it will not be changed while MAGMA is running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>Device to create queue on.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cuda_stream</td><td>CUDA stream to use, even if NULL (the so-called default stream).</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cublas_handle</td><td>cuBLAS handle to use. If NULL, a new handle is created.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cusparse_handle</td><td>cuSparse handle to use. If NULL, a new handle is created.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">queue_ptr</td><td>On output, the newly created queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacd3182186abc4a99def8a61a48af43fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">magma_queue_destroy</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">queue</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys a queue, freeing its resources. </p>
<p>If the queue was created with <a class="el" href="group__magma__queue.html#ga85b3bc302f2975f6e668cf57a196c97a" title="Warning: non-portable outside of CUDA. ">magma_queue_create_from_cuda()</a>, the CUDA stream, cuBLAS handle, and cuSparse handle given there are NOT freed &ndash; the caller retains ownership. However, if MAGMA allocated the handles, MAGMA will free them here.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to destroy. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3faec119d7aaac0d726d22b540d67fde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">magma_queue_sync</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">queue</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronizes with a queue. </p>
<p>The CPU blocks until all operations on the queue are finished.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to synchronize. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7a24bc34ee11fdd109e8c21b551400eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t magma_mem_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmagma__queue.html">magma_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Amount of free memory in bytes available on the device associated with the queue. </dd></dl>

</div>
</div>
<a class="anchor" id="ga49e39408583e02dfef86bac8ddb6d5d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">magma_int_t magma_queue_get_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmagma__queue.html">magma_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Device ID associated with the MAGMA queue. </dd></dl>

</div>
</div>
<a class="anchor" id="ga52943f155bf74be714a3c7ad8565772d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cudaStream_t magma_queue_get_cuda_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmagma__queue.html">magma_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CUDA stream associated with the MAGMA queue. </dd></dl>

</div>
</div>
<a class="anchor" id="gae170c3d343ba4ab6ce1ed463a2f5f4bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cublasHandle_t magma_queue_get_cublas_handle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmagma__queue.html">magma_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cuBLAS handle associated with the MAGMA queue. MAGMA assumes the handle's stream will not be modified. </dd></dl>

</div>
</div>
<a class="anchor" id="gae1a1a2938a02c5b56678d52874500e9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cusparseHandle_t magma_queue_get_cusparse_handle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmagma__queue.html">magma_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cuSparse handle associated with the MAGMA queue. MAGMA assumes the handle's stream will not be modified. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
